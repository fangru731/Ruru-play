<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌟 Ruru 陪玩寶貝單 🌟</title>
  <style>
    body {
      background-image: url('star-bg-demo.jpg');
      background-size: cover;
      background-attachment: fixed;
      font-family: 'Microsoft JhengHei', Arial, sans-serif;
      color: #333;
      margin: 0;
      padding: 0;
    }
    .container {
      background: rgba(255,255,255,0.96);
      max-width: 800px;
      margin: 38px auto;
      padding: 32px 18px 18px 18px;
      border-radius: 22px;
      box-shadow: 0 0 22px #fae89d;
      position: relative;
    }
    .q-ruru {
      position: absolute;
      top: 20px;
      right: 24px;
      width: 92px;
      z-index: 2;
    }
    .minions {
      display: flex; justify-content: center; gap: 7px; margin-top: 12px; margin-bottom: 6px;
    }
    .minions img { width: 40px; height: 40px; }
    h1 { text-align: center; color: #ffb300; margin-bottom: 12px; letter-spacing:1.5px;}
    label { font-weight: bold; margin-top: 16px; display: block; color: #333; }
    input[type="text"], input[type="number"], select {
      width: 92%; padding: 7px; border: 1.5px solid #ffde89;
      border-radius: 8px; margin-bottom: 6px; margin-top: 4px; font-size: 1.08em; box-sizing: border-box;
    }
    input[type="file"] { margin: 6px 0 14px 0;}
    .checkbox-label { font-weight: normal; margin-left: 4px;}
    .bonus-section {
      background: #fff9c2; border: 1.5px solid #ffd43b; padding: 12px; border-radius: 12px; margin:18px 0 12px 0;
      font-size: 1.04em;
    }
    .order-summary {
      background: #fff3e0; padding: 18px; border-radius: 14px; margin: 26px 0 14px 0; font-size: 1.07em;
      box-shadow: 0 0 8px #ffe08260;
    }
    .notice {
      background: #fdf6e4; border-radius: 12px; padding: 13px; font-size: 1em; color: #b86d00; margin-bottom: 20px;
      border: 1.5px solid #ffe082;
    }
    .footer {
      margin-top: 22px; text-align: center; color: #666; font-size: 1em;
    }
    .qr {
      display:block; margin:20px auto 10px auto; width:100px; border-radius:15px; box-shadow:0 0 8px #ffef8f54;
    }
    .form-section { margin-bottom:19px; }
    button, .btn {
      background: #ffd43b; color:#a67200; font-size: 1.15em; border:none; border-radius:10px; padding:10px 22px; cursor:pointer;
      margin-top:10px; box-shadow:0 2px 8px #ffe0825e; transition:0.1s;
    }
    button:hover { background: #fff176; color: #e67a00;}
    @media (max-width: 700px) {
      .container { max-width: 99vw; padding: 10vw 2vw;}
      .q-ruru { width:62px; top:9px; right:11px;}
      .minions img { width:26px; height:26px;}
      .qr { width:66px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="q-ruru-demo.png" class="q-ruru" alt="Q版Ruru">
    <div class="minions">
      <img src="minion-1.png" alt="小小兵1">
      <img src="minion-2.png" alt="小小兵2">
      <img src="minion-3.png" alt="小小兵3">
      <img src="minion-4.png" alt="小小兵4">
      <img src="minion-5.png" alt="小小兵5">
      <img src="minion-6.png" alt="小小兵6">
    </div>
    <h1>🌟 Ruru 陪玩寶貝單 🌟</h1>

    <!-- 服務表單開始 -->
    <form id="orderForm" autocomplete="off" onsubmit="event.preventDefault();alert('預約完成（僅預覽用），可串接正式流程！');">
      <div class="form-section">
        <label>暱稱（寶寶名）</label>
        <input type="text" id="nickname" maxlength="12" required placeholder="請填你的暱稱">
      </div>
      <div class="form-section">
        <label>陪玩項目（可複選＋填單數）</label>
        <div>
          <input type="number" id="s1" min="0" max="99" value="0" style="width:48px;"> <span class="checkbox-label">傳說對決（$200/兩場）</span><br>
          <input type="number" id="s2" min="0" max="99" value="0" style="width:48px;"> <span class="checkbox-label">語音通話（$250/30分）</span><br>
          <input type="number" id="s3" min="0" max="99" value="0" style="width:48px;"> <span class="checkbox-label">打字聊天（$200/30分）</span><br>
          <input type="number" id="s4" min="0" max="99" value="0" style="width:48px;"> <span class="checkbox-label">全民Party 唱歌（$100/首）</span><br>
          <input type="number" id="s5" min="0" max="99" value="0" style="width:48px;"> <span class="checkbox-label">情感諮詢（$200/30分）</span><br>
          <input type="checkbox" id="donateCheck" onchange="document.getElementById('donateAmt').style.display=this.checked?'inline':'none';document.getElementById('donateMsg').style.display=this.checked?'block':'none';"> <span class="checkbox-label">贊助支持（抖內）</span>
          <input type="number" id="donateAmt" min="0" max="99999" value="0" style="width:80px; display:none;" placeholder="自填金額">
          <input type="text" id="donateMsg" style="width:180px; display:none;" maxlength="32" placeholder="給Ru的話">
        </div>
      </div>
      <div class="form-section">
        <label>折扣金</label>
        <select id="discount">
          <option value="0">不使用折扣</option>
          <option value="50">分享助折扣 $50</option>
          <option value="30">推薦好友折扣 $30</option>
          <option value="30">追蹤 IG 折扣 $30</option>
        </select>
      </div>
      <div class="form-section">
        <label>上傳截圖（折扣證明／匯款圖）</label>
        <input type="file" id="proofFile" accept="image/*">
      </div>
      <div class="form-section">
        <label>預約時間</label>
        <select id="weekday" onchange="updateTimeblocks()">
          <option value="">請選擇星期</option>
          <option value="2">星期二</option>
          <option value="3">星期三</option>
          <option value="4">星期四</option>
          <option value="5">星期五</option>
          <option value="6">星期六</option>
          <option value="7">星期日</option>
        </select>
        <select id="timeblock">
          <option value="">請先選星期</option>
        </select>
      </div>
      <div class="form-section" style="text-align:center;">
        <button type="button" onclick="calcAll()">計算應付金額</button>
        <button type="submit" class="btn">完成預約並送出</button>
      </div>
    </form>

    <!-- 訂單總覽 -->
    <div class="order-summary" id="summaryBox">
      <b>預約時間：</b><span id="showTime"></span><br>
      <b>所選項目：</b><span id="showItems"></span><br>
      <b>服務金額小計：</b><span id="subtotalTxt">0</span> 元<br>
      <b>折扣金額：</b><span id="discountTxt">0</span> 元<br>
      <b>贊助金額：</b><span id="donateTxt">0</span> 元<br>
      <b>最終應付金額：</b><span id="total">0</span> 元
    </div>

    <!-- 買五送二自動顯示 -->
    <div class="bonus-section" id="bonusSection" style="display:none;">
      🎁 買五送二優惠已啟動！請選擇兩項要贈送的服務：
      <select id="bonus1">
        <option value="">請選擇贈送項目</option>
        <option value="s1">傳說對決</option>
        <option value="s2">語音通話</option>
        <option value="s3">打字聊天</option>
        <option value="s4">全民Party 唱歌</option>
        <option value="s5">情感諮詢</option>
      </select>
      <select id="bonus2">
        <option value="">請選擇贈送項目</option>
        <option value="s1">傳說對決</option>
        <option value="s2">語音通話</option>
        <option value="s3">打字聊天</option>
        <option value="s4">全民Party 唱歌</option>
        <option value="s5">情感諮詢</option>
      </select>
    </div>

    <!-- 注意事項與服務規則 -->
    <div class="notice">
      <b>注意事項與服務規則：</b><br>
      ‧ 表單送出後請於 1 小時內完成付款並回傳截圖，否則預約失效。<br>
      ‧ 折扣金僅能擇一使用，需截圖證明。<br>
      ‧ 滿 5 單即贈送 2 單。<br>
      ‧ 嚴禁見面/曖昧/不當要求。<br>
      ‧ 取消/更改請提前三小時通知。<br>
    </div>

    <!-- LINE QR code -->
    <img src="ru-line-qr-demo.png" class="qr" alt="Line QR Code">
    <div class="footer">
      加我官方 LINE 聯繫喔！
    </div>
  </div>

  <!-- JS 功能區 -->
  <script>
    // 預約時間分半小時
    const timeTable = {
      2: ["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30"], // 星期二
      3: ["23:00","23:30","00:00","00:30"], // 星期三
      4: ["19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30"], // 星期四
      5: ["23:00","23:30","00:00","00:30"], // 星期五
      6: ["19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30"], // 星期六
      7: ["00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30","04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"] // 星期日
    };

    function updateTimeblocks() {
      let day = document.getElementById('weekday').value;
      let blockSel = document.getElementById('timeblock');
      blockSel.innerHTML = '';
      if (!timeTable[day]) {
        blockSel.innerHTML = '<option value="">請先選星期</option>';
        return;
      }
      for (let t of timeTable[day]) {
        let op = document.createElement('option');
        op.value = t;
        op.text = t;
        blockSel.appendChild(op);
      }
    }

    // 金額&總覽自動計算
    function calcAll() {
      let price = [200,250,200,100,200];
      let items = [];
      let subtotal = 0;
      let singles = 0;
      for(let i=1;i<=5;i++){
        let v = parseInt(document.getElementById('s'+i).value)||0;
        if(v>0){
          items.push(['傳說對決','語音通話','打字聊天','全民Party 唱歌','情感諮詢'][i-1]+' x'+v);
          subtotal += v*price[i-1];
          singles += v;
        }
      }
      document.getElementById('showItems').innerText = items.join('、')||'無';
      document.getElementById('subtotalTxt').innerText = subtotal;
      let discount = parseInt(document.getElementById('discount').value)||0;
      document.getElementById('discountTxt').innerText = discount;
      let donate = document.getElementById('donateCheck').checked ? (parseInt(document.getElementById('donateAmt').value)||0) : 0;
      document.getElementById('donateTxt').innerText = donate;
      let total = subtotal - discount + donate;
      document.getElementById('total').innerText = total<0?0:total;
      document.getElementById('showTime').innerText = getWeekdayStr(document.getElementById('weekday').value) + ' ' + (document.getElementById('timeblock').value||'');
      // 買五送二bonus
      let bonus = document.getElementById('bonusSection');
      if(singles>=5){
        bonus.style.display = '';
      } else {
        bonus.style.display = 'none';
        document.getElementById('bonus1').value = '';
        document.getElementById('bonus2').value = '';
      }
    }

    function getWeekdayStr(num) {
      switch(num) {
        case '2': return '星期二'; case '3': return '星期三'; case '4': return '星期四'; case '5': return '星期五'; case '6': return '星期六'; case '7': return '星期日';
        default: return '';
      }
    }

    // 事件綁定
    window.onload = function(){
      Array.from(document.querySelectorAll('input,select')).forEach(function(e){
        e.addEventListener('change', calcAll);
        e.addEventListener('input', calcAll);
      });
      calcAll();
      updateTimeblocks();
    }
  </script>
</body>
</html>
