<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ğŸŒŸ Ruru é™ªç©å¯¶è²å–® ğŸŒŸ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { background-image: url('star-bg-demo.jpg'); background-size: cover; background-attachment: fixed;
      font-family: 'Microsoft JhengHei', Arial, sans-serif; color: #333; margin: 0; padding: 0; }
    .container { background: rgba(255,255,255,0.97); max-width: 820px; margin: 40px auto 22px auto; padding: 32px 18px 18px 18px;
      border-radius: 28px; box-shadow: 0 0 28px #fae89d; position: relative; }
    .title-header { text-align:center; margin-bottom:22px; position:relative; }
    .minions-row { display:flex; justify-content:center; gap:26px; margin-bottom:10px; }
    .minions-row.bottom { margin-top:15px; margin-bottom:0; }
    .minions-row img { width:88px; height:88px; }
    .title-row { display: flex; align-items: center; justify-content: center; gap: 38px; margin-bottom: 0; }
    .q-ruru-inline { width: 152px; border-radius: 20px; box-shadow: 0 0 10px #ffe082b0; background: #fff; }
    h1 { flex: 0 1 auto; color: #ffb300; margin: 0; font-size: 2.5em; letter-spacing: 2px; text-align: center;
      font-weight: bold; text-shadow: 0 2px 8px #fff9cd; }
    .form-section { margin-bottom:22px; }
    label { font-weight: bold; margin-top: 18px; display: block; color: #333; font-size: 1.11em;}
    input[type="text"], input[type="number"], select { width: 95%; padding: 10px; border: 1.9px solid #ffde89;
      border-radius: 10px; margin-bottom: 8px; margin-top: 4px; font-size: 1.09em; box-sizing: border-box; }
    input[type="file"] { margin: 8px 0 16px 0;}
    .checkbox-label { font-weight: normal; margin-left: 4px;}
    .order-summary { background: #fff7e0; padding: 20px; border-radius: 18px; margin: 27px 0 15px 0; font-size: 1.15em;
      box-shadow: 0 0 12px #ffe08265;}
    .footer { margin-top: 22px; text-align: center; color: #666; font-size: 1.07em; }
    .qr { display:block; margin:22px auto 7px auto; width:105px; border-radius:16px; box-shadow:0 0 9px #ffef8f55;}
    button, .btn { background: #ffd43b; color:#a67200; font-size: 1.22em; border:none; border-radius:12px; padding:13px 32px;
      cursor:pointer; margin-top:13px; box-shadow:0 2px 12px #ffe08270; transition:0.1s; font-weight:bold; }
    button:hover { background: #fff176; color: #e67a00;}
    .agree-label { font-weight: normal; color:#c18700; }
    @media (max-width: 800px) {
      .container { max-width: 99vw; padding: 3vw 1.5vw;}
      .q-ruru-inline { width:90px;}
      .minions-row img { width:50px; height:50px;}
      .qr { width:54px; }
      h1 { font-size: 1.35em; }
    }
    select option[disabled] { color:#bbb; }
  </style>
</head>
<body>
  <div class="container">
    <div class="title-header">
      <div class="minions-row">
        <img src="minion-1.png"><img src="minion-2.png"><img src="minion-3.png">
      </div>
      <div class="title-row">
        <h1>ğŸŒŸ Ruru é™ªç©å¯¶è²å–® ğŸŒŸ</h1>
        <img src="q-ruru-demo.png" class="q-ruru-inline">
      </div>
      <div class="minions-row bottom">
        <img src="minion-4.png"><img src="minion-5.png"><img src="minion-6.png">
      </div>
    </div>

    <form id="orderForm" autocomplete="off">
      <!-- ä½ çš„æ‰€æœ‰è¡¨å–®æ¬„ä½ç…§èˆŠ -->
      <div class="form-section">
        <label for="nickname">æš±ç¨±ï¼ˆå¿…å¡«ï¼‰</label>
        <input type="text" id="nickname" maxlength="12" required placeholder="è«‹å¡«ä½ çš„æš±ç¨±">
      </div>
      <div class="form-section">
        <label>é™ªç©é …ç›®ï¼ˆå¯è¤‡é¸ï¼‹å¡«å–®æ•¸ï¼‰</label>
        <div>
          <input type="number" id="s1" min="0" max="99" value="0" style="width:64px;"> <span class="checkbox-label">å‚³èªªå°æ±ºï¼ˆ$200/å…©å ´ï¼‰</span><br>
          <input type="number" id="s2" min="0" max="99" value="0" style="width:64px;"> <span class="checkbox-label">èªéŸ³é€šè©±ï¼ˆ$250/30åˆ†ï¼‰</span><br>
          <input type="number" id="s3" min="0" max="99" value="0" style="width:64px;"> <span class="checkbox-label">æ‰“å­—èŠå¤©ï¼ˆ$200/30åˆ†ï¼‰</span><br>
          <input type="number" id="s4" min="0" max="99" value="0" style="width:64px;"> <span class="checkbox-label">å…¨æ°‘Party å”±æ­Œï¼ˆ$100/é¦–ï¼‰</span><br>
          <input type="number" id="s5" min="0" max="99" value="0" style="width:64px;"> <span class="checkbox-label">æƒ…æ„Ÿè«®è©¢ï¼ˆ$200/30åˆ†ï¼‰</span><br>
          <input type="checkbox" id="donateCheck" onchange="document.getElementById('donateAmt').style.display=this.checked?'inline':'none';document.getElementById('donateMsg').style.display=this.checked?'block':'none';"> <span class="checkbox-label">è´ŠåŠ©æ”¯æŒï¼ˆæŠ–å…§ï¼‰</span>
          <input type="number" id="donateAmt" min="0" max="99999" value="0" style="width:100px; display:none;" placeholder="è‡ªå¡«é‡‘é¡">
          <input type="text" id="donateMsg" style="width:220px; display:none;" maxlength="32" placeholder="çµ¦Ruçš„è©±">
        </div>
      </div>
      <div class="form-section">
        <label>ä»˜æ¬¾æ–¹å¼ï¼ˆå¿…é¸ï¼‰</label>
        <select id="payType" required onchange="onPayTypeChange()">
          <option value="">è«‹é¸æ“‡</option>
          <option value="linepay">Line Pay</option>
          <option value="bank">åŒ¯æ¬¾è½‰å¸³</option>
        </select>
      </div>
      <div id="bankInfo" style="display:none; background:#fffde5; border:1.2px solid #ffe082; border-radius:10px; padding:11px 16px 11px 16px; color:#a36b00; margin-bottom:10px; font-size:1em;">
        <b>åŒ¯æ¬¾è³‡è¨Šï¼š</b><br>
        LINE Bank éŠ€è¡Œå¸³æˆ¶ï¼š824 é€£ç·šå•†æ¥­éŠ€è¡Œ<br>
        å¸³è™Ÿï¼š111019874455<br>
        æˆ¶åï¼šæ—èŠ³å¦‚<br>
        åŒ¯æ¬¾å‚™è¨»è«‹å¡«å¯«ã€Œå°å¦‚ï¼‹é …ç›®ï¼‹é‡‘é¡ã€ä»¥åˆ©å°å¸³<br>
      </div>
      <div id="payRemark" style="display:none; color:#b86d00; font-size:1em; margin-bottom:12px;">
        è«‹æš«å‹¿ä»˜æ¬¾ï¼Œç­‰ Ru å›è¦† Line Pay å¸³è™Ÿå†ä»˜æ¬¾å“¦ï¼
      </div>
      <div class="form-section">
        <label>æŠ˜æ‰£é‡‘</label>
        <select id="discount" onchange="toggleDiscountProof()">
          <option value="0">ä¸ä½¿ç”¨æŠ˜æ‰£</option>
          <option value="50">åˆ†äº«æŠ˜æ‰£ $50</option>
          <option value="30">æ¨è–¦å¥½å‹æŠ˜æ‰£ $30</option>
          <option value="30">è¿½è¹¤ IG æŠ˜æ‰£ $30</option>
        </select>
        <input type="file" id="discountProof" accept="image/*,.jpg,.jpeg,.png" style="margin-top:7px;display:none;">
        <label id="discountProofLabel" style="margin-bottom:0; color:#bb8600; display:none;">è«‹ä¸Šå‚³æŠ˜æ‰£é‡‘æˆªåœ–è­‰æ˜</label>
      </div>
      <div class="form-section">
        <label>ä¸Šå‚³åŒ¯æ¬¾ï¼ä»˜æ¬¾ï¼æŠ˜æ‰£æˆªåœ–ï¼ˆå¦‚æœ‰ï¼‰</label>
        <input type="file" id="proofFile" accept="image/*,.jpg,.jpeg,.png">
      </div>
      <!-- ğŸ”¥ åˆ†é–‹æ˜ŸæœŸèˆ‡æ™‚é–“ ğŸ”¥ -->
      <div class="form-section">
        <label>é ç´„æ˜ŸæœŸ</label>
        <select id="weekday" onchange="updateTimeblocks()" required>
          <option value="">è«‹é¸æ“‡æ˜ŸæœŸ</option>
          <option value="2">æ˜ŸæœŸäºŒ</option>
          <option value="3">æ˜ŸæœŸä¸‰</option>
          <option value="4">æ˜ŸæœŸå››</option>
          <option value="5">æ˜ŸæœŸäº”</option>
          <option value="6">æ˜ŸæœŸå…­</option>
          <option value="7">æ˜ŸæœŸæ—¥</option>
        </select>
      </div>
      <div class="form-section">
        <label>é ç´„æ™‚æ®µ</label>
        <select id="timeblock" required>
          <option value="">è«‹å…ˆé¸æ˜ŸæœŸ</option>
        </select>
      </div>
      <!-- ...è¦å‰‡ã€åŒæ„å‹¾é¸ã€é€å‡ºéˆ•ã€è¨‚å–®ç¸½è¦½å€... -->
      <!-- é€™è£¡éƒ½è·Ÿä½ åŸæœ¬ä¸€è‡´å³å¯ï¼ -->
      <div class="form-section" style="text-align:center;">
        <button type="button" onclick="calcAll()">è¨ˆç®—æ‡‰ä»˜é‡‘é¡</button>
        <button type="submit" class="btn">å®Œæˆé ç´„ä¸¦é€å‡º</button>
      </div>
    </form>

    <!-- è¨‚å–®ç¸½è¦½ã€è²·äº”é€äºŒã€LINE QR ... ç•¥ï¼Œç…§ä½ åŸæœ¬å…§å®¹å³å¯ -->

    <img src="ru-line-qr-demo.png" class="qr" alt="Line QR Code">
    <div class="footer">åŠ æˆ‘å®˜æ–¹ LINE è¯ç¹«å–”ï¼</div>
  </div>
  <script>
    // æœ¬é€±æ¯ä¸€å¤©çš„æ‰€æœ‰å¯é¸æ™‚æ®µ
    const timetable = {
      "2": ["00:00","00:30","01:00","01:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"],
      "3": ["23:00","23:30","00:00","00:30","01:00","01:30"],
      "4": ["19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30"],
      "5": ["23:00","23:30","00:00","00:30"],
      "6": ["19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30","00:00","00:30","01:00","01:30"],
      "7": [
        "00:00","00:30","01:00","01:30","02:00","02:30","03:00","03:30",
        "04:00","04:30","05:00","05:30","06:00","06:30","07:00","07:30","08:00","08:30","09:00","09:30",
        "10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30",
        "16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00","22:30","23:00","23:30"
      ]
    };

    // å‡è¨­é€™æ˜¯å·²é ç´„çš„æ™‚æ®µæ¸…å–® (ä½ è¦æ”¹æˆfetchå¾Œå°APIå–å¾—)
    let reservedTimes = {
      "2": ["19:30","21:00"], // ç¯„ä¾‹ï¼šæ˜ŸæœŸäºŒ 19:30ã€21:00è¢«é ç´„
      "3": [],
      "4": ["20:30"],
      "5": [],
      "6": [],
      "7": ["09:00"]
    };

    function updateTimeblocks() {
      const day = document.getElementById('weekday').value;
      const blockSel = document.getElementById('timeblock');
      blockSel.innerHTML = '<option value="">è«‹é¸æ“‡æ™‚æ®µ</option>';
      if (!timetable[day]) return;
      // ç•¶å‰æ™‚é–“ï¼ˆåªé‡å°ä»Šå¤©æœƒæ’é™¤å·²éï¼‰
      const now = new Date();
      const today = (now.getDay() === 0 ? 7 : now.getDay()).toString(); // é€±æ—¥ç‚º7
      timetable[day].forEach(time => {
        // æª¢æŸ¥æ˜¯å¦å·²éï¼ˆåªé‡å°ä»Šå¤©ï¼‰
        let disabled = false;
        if (day === today) {
          const [h, m] = time.split(':');
          if (+h < now.getHours() || (+h === now.getHours() && +m <= now.getMinutes())) disabled = true;
        }
        // æª¢æŸ¥å·²é ç´„
        if (reservedTimes[day] && reservedTimes[day].includes(time)) disabled = true;
        let opt = document.createElement('option');
        opt.value = time;
        opt.innerText = time + (disabled ? 'ï¼ˆå·²è¢«é ç´„æˆ–å·²éï¼‰' : '');
        if (disabled) opt.disabled = true;
        blockSel.appendChild(opt);
      });
    }
    // å…¶é¤˜ JS é‡‘é¡è¨ˆç®—ç­‰åŠŸèƒ½ï¼Œç…§ä½ åŸæœ¬å…§å®¹å³å¯
  </script>
</body>
</html>
